---

- name: Include debian.yml
  include: debian.yml
  when: ansible_distribution == 'Debian'

- name: Include centos.yml
  include: centos.yml
  when: ansible_distribution == 'CentOS'

- name: Include ubuntu.yml
  include: ubuntu.yml
  when: ansible_distribution == 'Ubuntu'

- name: Include fedora.yml
  include: fedora.yml
  when: ansible_distribution == 'Fedora'

- name: Detect TravisCI
  set_fact:
    is_travis: "{{ lookup('env', 'TRAVIS') | bool }}"

- name: Set SDK version
  set_fact:
    sdk_version: >-
      {% if is_travis -%}{{ lookup('env', 'SDK_VERSION') }}
      {%- else -%}{{ dotnet_package }}
      {%- endif %}

- name: Install dotnet core SDK
  package:
    name: dotnet-sdk-{{ sdk_version }}
    state: present
    update_cache: true
