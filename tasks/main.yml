---

- include: rhel.yml
  when: >
    ansible_distribution == 'CentOS' or
    ansible_distribution == 'Red Hat Enterprise Linux' or
    ansible_distribution == 'RedHat' or
    ansible_distribution == 'Amazon'

- include: ubuntu.yml
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'

- name: Detect TravisCI
  set_fact:
    is_travis: "{{ lookup('env', 'TRAVIS') | bool }}"

- name: Set SDK version
  set_fact:
    sdk_version: >-
      {% if is_travis -%}{{ lookup('env', 'SDK_VERSION') }}
      {%- else -%}{{ dotnet_package }}
      {%- endif %}

- name: Install dotnet core SDK
  package:
    name: dotnet-sdk-{{ sdk_version }}
    state: present
    update_cache: true
